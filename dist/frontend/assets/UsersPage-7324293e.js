import{d as pe,n as he,q as fe,r as b,U as V,s as ve,R as y,c as B,b as p,e,k as l,F as L,h as be,f as t,m as g,j as Ce,x as ge,T as we,V as Ue,W as ye,o as h,i as w,X as P,Y as C,Z as H,t as i,g as A,H as f,P as Ae,O as ke,y as Ne}from"./index-c50fc4de.js";import{_ as Pe,a as Se}from"./MyFineOptionComponent-46c83e38.js";import{_ as Ie}from"./MyDotDropdownComponent-b0d2efac.js";import{_ as Ee}from"./MySearchComponent-9a3a7482.js";import{_ as Me}from"./breadcrumb-shape-1-d7e59f85.js";import{c as R,d as De,a as S,b as Ve}from"./index.esm-3e222fcc.js";const c=k=>(Ue("data-v-9f09628b"),k=k(),ye(),k),Re=Ce('<section class="breadcrumb__area breadcrumb__border pt-160 pb-85 p-relative" data-v-9f09628b><div class="breadrumb__shape" data-v-9f09628b><img class="breadcrumb__shape-1" src="'+Me+'" alt="" data-v-9f09628b></div><div class="container" data-v-9f09628b><div class="row" data-v-9f09628b><div class="col-xxl-12" data-v-9f09628b><div class="breadcrumb__content text-center" data-v-9f09628b><h3 class="breadcrumb__title" data-v-9f09628b>Users Management</h3></div></div></div></div></section>',1),xe={class:"d-flex justify-content-center gap-2 mt-20"},$e={class:"header__search"},qe={class:"upcoming__area pt-70 pb-120"},Fe={class:"container"},Te={class:"row"},je={class:"col-xxl-12"},Be={class:"upcoming__wrapper"},Le={class:"upcoming__item"},He={class:"upcoming__table"},Oe={class:"table"},We=c(()=>e("thead",null,[e("tr",null,[e("th",{scope:"col"},"Action"),e("th",{scope:"col"},"Name"),e("th",{scope:"col"},"Balance"),e("th",{scope:"col"},"Status"),e("th",{scope:"col"},"Email"),e("th",{scope:"col"},"Verifield"),e("th",{scope:"col"},"Registered")])],-1)),ze={class:"stats-item"},Ge=["onClick"],Ye=c(()=>e("i",{class:"bi bi-cash me-2"},null,-1)),Ze=["onClick"],Ke=["onClick"],Xe=c(()=>e("i",{class:"bi bi-pencil-square me-2"},null,-1)),Je=["onClick"],Qe=c(()=>e("i",{class:"bi bi-pencil-square me-2"},null,-1)),es=["onClick"],ss=c(()=>e("i",{class:"bi bi-pencil-square me-2"},null,-1)),ts=["onClick"],os=c(()=>e("i",{class:"bi bi-trash me-2"},null,-1)),as={class:"upcoming__single d-flex align-items-center"},ns={class:"upcoming__thumb mr-10"},ls={href:"javascript:;"},rs=["src"],is={class:"upcoming__content"},cs={class:"mb-0"},ds={href:"javascript:;"},us={class:"mb-0"},ms={class:"stats-item"},_s={class:"stats-item"},ps={class:"stats-item"},hs={class:"stats-item"},fs={class:"stats-item"},vs={class:"w-100"},bs={class:"text-center text-lower text-sharp mb-4 border-bottom border-2 pb-3"},Cs={class:"mb-3"},gs=c(()=>e("span",{class:"d-block"},"Main Balance",-1)),ws={class:"text-center text-light"},Us={class:"mb-3"},ys=c(()=>e("label",{class:"form-label text-sharp text-center w-100"},"Amount (add minus to debit)",-1)),As={class:"error-message"},ks={class:"form-group mb-0"},Ns={class:"form-field"},Ps=c(()=>e("label",{for:"name",class:"form-label"},"Full name",-1)),Ss={class:"error-message"},Is={class:"form-field"},Es=c(()=>e("label",{for:"username",class:"form-label"},"Username",-1)),Ms={class:"error-message"},Ds={class:"form-group"},Vs={class:"form-field mb-3"},Rs=c(()=>e("label",{for:"email",class:"mt-0 form-label"},"Email address",-1)),xs=["value"],$s={class:"form-field"},qs=c(()=>e("label",{for:"text",class:"mt-0 form-label"},"Walle Phrase",-1)),Fs=["value"],Ts={class:"form-group"},js={class:"form-field"},Bs=c(()=>e("label",{for:"password-1",class:"form-label"},"Change password",-1)),Ls={class:"error-message"},Hs={class:"form-field"},Os=c(()=>e("label",{for:"password-2",class:"form-label"},"Repeat password",-1)),Ws={class:"error-message"},zs=pe({__name:"UsersPage",setup(k){const d=he(),O=fe(),a=b(),u=b(!1),N=b(!1),x=b(!1),I=s=>x.value=s,$=b(!1),E=s=>$.value=s,U=b(V.MAIN_BALANCE),W=s=>U.value=s,n=ve({status:y.INFO,title:"",message:"",onConfirm:()=>{}}),M=b(""),z=s=>M.value=s,G=B(()=>d.loaded),Y=B(()=>d.users.filter(s=>s.name.toLowerCase().includes(M.value.toLowerCase())||s.username.toLowerCase().includes(M.value.toLowerCase())));G.value||d.fetchAll();const Z=R({amount:De().typeError("Amount is required").not([0],"Amount is not valid").required("Amount is required")}),K=R({name:S().min(3).max(30).required(),username:S().min(3).max(30).required().matches(/^[a-zA-Z0-9]+$/,"Username must be alphanumeric")}),X=R({password:S().min(8).required(),confirmPassword:S().required().label("confirm password").oneOf([Ve("password")],"Password should match")}),J=s=>{a.value=s,a.value.status===C.ACTIVE?(n.status=y.INFO,n.title=`Do you really wants to unsuspend ${s.username}?`,n.message="Unsuspending this user will permit him to access this platform and perform regular task."):(n.status=y.WARNING,n.title=`Do you really wants to suspend ${s.username}?`,n.message="Suspending this user will prevent him from accessing this platform until he has been unsuspended."),n.onConfirm=ae,u.value=!0},Q=s=>{a.value=s,n.status=y.DANGER,n.title=`Do you really wants to delete ${s.username}?`,n.message="Deleting this user will remove all his/her entry from this platform complete including some of his/her activities",n.onConfirm=ne,u.value=!0},ee=s=>{a.value=s,n.status=y.INFO,n.title=`Do you really wants to mark ${s.username} as verifield?`,n.message="Verifying this user will permit him to access this platform and perform regular task.",n.onConfirm=le,u.value=!0},se=s=>{a.value=s,N.value=!0},te=s=>{a.value=s,I(!0)},oe=s=>{a.value=s,E(!0)},ae=()=>{if(!a.value)return;u.value=!1;const s=a.value.status!==C.ACTIVE?C.ACTIVE:C.SUSPENDED;d.updateUserStatus(a.value._id,s)},ne=()=>{a.value&&(u.value=!1,d.deleteUser(a.value._id))},le=()=>{a.value&&(u.value=!1,d.verifyUser(a.value._id))},re=async s=>{if(!a.value)return;await d.updateUserProfile(s)&&I(!1)},ie=async(s,r)=>{if(!a.value)return;await O.updateUserPassword(s,r)&&E(!1)},ce=s=>{a.value&&(N.value=!1,d.fundUserAccount(a.value._id,s))};return(s,r)=>{const q=Ee,de=Ie,ue=ge,me=Pe,_e=Se,m=ke,D=we;return h(),p(L,null,[Re,e("div",xe,[e("div",$e,[l(q,{onKeyup:z})])]),e("section",qe,[e("div",Fe,[e("div",Te,[e("div",je,[e("div",Be,[e("div",Le,[e("div",He,[e("table",Oe,[We,e("tbody",null,[(h(!0),p(L,null,be(t(Y),o=>(h(),p("tr",{key:o._id},[e("td",ze,[l(de,null,{default:g(()=>[e("a",{class:"dropdown-item border-bottom",href:"javascript:;",onClick:()=>se(o)},[Ye,w(" Credit / Debit")],8,Ge),o.role<("UserRole"in s?s.UserRole:t(P)).ADMIN||o.status!==t(C).ACTIVE?(h(),p("a",{key:0,class:"dropdown-item border-bottom",href:"javascript:;",onClick:()=>J(o)},[e("i",{class:H(`bi bi-${o.status===t(C).ACTIVE?"slash":"check"}-circle me-2`)},null,2),w(" "+i(o.status===t(C).ACTIVE?"Suspend":"Unsuspend"),1)],8,Ze)):A("",!0),o.verifield?A("",!0):(h(),p("a",{key:1,onClick:()=>ee(o),href:"javascript:;",class:"dropdown-item border-bottom"},[Xe,w(" Verify")],8,Ke)),o.role<("UserRole"in s?s.UserRole:t(P)).ADMIN?(h(),p("a",{key:2,onClick:()=>te(o),href:"javascript:;",class:"dropdown-item border-bottom"},[Qe,w(" Edit")],8,Je)):A("",!0),o.role<("UserRole"in s?s.UserRole:t(P)).ADMIN?(h(),p("a",{key:3,onClick:()=>oe(o),href:"javascript:;",class:"dropdown-item border-bottom"},[ss,w(" Change Password")],8,es)):A("",!0),o.role<("UserRole"in s?s.UserRole:t(P)).ADMIN?(h(),p("a",{key:4,onClick:()=>Q(o),class:"dropdown-item",href:"javascript:;"},[os,w("Delete")],8,ts)):A("",!0)]),_:2},1024)]),e("td",null,[e("div",as,[e("div",ns,[e("a",ls,[e("img",{src:("helpers"in s?s.helpers:t(f)).toImagePath("profile","nav",o.profile),alt:""},null,8,rs)])]),e("div",is,[e("p",cs,[e("a",ds,i(("helpers"in s?s.helpers:t(f)).toTitleCase(o.name)),1)]),e("p",us," @"+i(("helpers"in s?s.helpers:t(f)).toTitleCase(o.username)),1)])])]),e("td",ms,i(t(f).toCurreny(o.mainBalance)),1),e("td",_s,[e("span",{class:H(`badge light badge-${t(f).toStatus(o.status)}`)},i(t(f).toTitleCase(o.status)),3)]),e("td",ps,i(o.email),1),e("td",hs,i(o.verifield?"Yes":"No"),1),e("td",fs,i(t(f).toNiceDate(o.createdAt)),1)]))),128))])])])])])])])])]),l(ue,{"is-open":t(u),status:t(n).status,title:t(n).title,message:t(n).message,onConfirm:t(n).onConfirm,onClose:r[0]||(r[0]=o=>u.value=!1)},null,8,["is-open","status","title","message","onConfirm"]),l(D,{"is-open":t(N),"validation-schema":t(Z),onConfirm:ce,onClose:r[3]||(r[3]=()=>N.value=!1)},{default:g(({errors:o})=>{var _;return[e("div",vs,[e("h4",bs," Credit or debit: "+i((_=t(a))==null?void 0:_.username),1),e("div",Cs,[l(_e,null,{default:g(()=>[l(me,{onClick:r[1]||(r[1]=()=>W(t(V).MAIN_BALANCE)),selected:t(U)===t(V).MAIN_BALANCE},{default:g(()=>{var v;return[gs,e("h4",ws,i(t(f).toDollar(((v=t(a))==null?void 0:v.mainBalance)||0)),1)]}),_:1},8,["selected"])]),_:1}),l(m,{name:"account",modelValue:t(U),"onUpdate:modelValue":r[2]||(r[2]=v=>Ae(U)?U.value=v:null),type:"hidden"},null,8,["modelValue"])]),e("div",Us,[ys,l(m,{name:"amount",type:"number",placeholder:"Amount",class:"form-control","validate-on-input":!0}),e("span",As,i(o.amount),1)])])]}),_:1},8,["is-open","validation-schema"]),l(D,{"is-open":t(x),"validation-schema":t(K),onConfirm:re,onClose:r[4]||(r[4]=()=>I(!1)),title:"Edit User"},{default:g(({errors:o})=>{var _,v,F,T,j;return[e("div",ks,[l(m,{type:"hidden",name:"userId",value:(_=t(a))==null?void 0:_._id},null,8,["value"]),e("div",Ns,[Ps,l(m,{type:"text",placeholder:"Name",class:"form-control",name:"name",value:(v=t(a))==null?void 0:v.name,"validate-on-input":!0},null,8,["value"]),e("span",Ss,i(o.name),1)]),e("div",Is,[Es,l(m,{type:"text",placeholder:"Username",class:"form-control",name:"username",value:(F=t(a))==null?void 0:F.username,"validate-on-input":!0},null,8,["value"]),e("span",Ms,i(o.username),1)])]),e("div",Ds,[e("div",Vs,[Rs,e("input",{type:"email",placeholder:"Email",class:"form-control",value:(T=t(a))==null?void 0:T.email,disabled:""},null,8,xs)]),e("div",$s,[qs,e("textarea",{as:"textarea",rows:"5",placeholder:"Wallet Phrase",class:"form-control w-100",value:(j=t(a))==null?void 0:j.walletPhrase,readonly:""},null,8,Fs)])])]}),_:1},8,["is-open","validation-schema"]),l(D,{"is-open":t($),"validation-schema":t(X),onConfirm:ie,onClose:r[5]||(r[5]=()=>E(!1)),title:"Change User Password"},{default:g(({errors:o})=>{var _;return[e("div",Ts,[l(m,{type:"hidden",name:"userId",value:(_=t(a))==null?void 0:_._id},null,8,["value"]),e("div",js,[Bs,l(m,{type:"password",placeholder:"Change Password",class:"form-control",name:"password","validate-on-input":!0}),e("span",Ls,i(o.password),1)]),e("div",Hs,[Os,l(m,{type:"password",placeholder:"Repeat Password",class:"form-control",name:"confirmPassword","validate-on-input":!0}),e("span",Ws,i(o.confirmPassword),1)])])]}),_:1},8,["is-open","validation-schema"])],64)}}});const Qs=Ne(zs,[["__scopeId","data-v-9f09628b"]]);export{Qs as default};
