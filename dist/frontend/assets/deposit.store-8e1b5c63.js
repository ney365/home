import{a1 as v,S as w,n as x,r as p,a2 as c}from"./index-c50fc4de.js";const A=v("deposit",()=>{const o=w(),f=x(),r="deposit",a=p([]),i=p(!1);function n(t){a.value=t}function l(t){i.value=t}function h(t,s){const e=a.value;if(!e)return;const u=e.findIndex(d=>d._id===t);e[u]=s,n(e)}async function P(){l(!1);try{const t=await c.get(`${r}/master`);n(t.data.data.deposits)}catch(t){console.error(t),o.handlePost(t.response)}l(!0)}async function y(t,s){try{o.setPost(!0);const e=await c.patch(`${r}/update-status`,{status:s,depositId:t});h(t,e.data.data.deposit),f.fetchAll(),o.handlePost(e)}catch(e){console.error(e),o.handlePost(e.response)}}async function S(t){try{o.setPost(!0);const s=await c.delete(`${r}/delete/${t}`),e=a.value;if(!e)return;const u=e.filter(d=>d._id!==t);n(u),o.handlePost(s)}catch(s){console.error(s),o.handlePost(s.response)}}async function D(){l(!1);try{const t=await c.get(`${r}`);n(t.data.data.deposits)}catch(t){console.error(t),o.handlePost(t.response)}l(!0)}async function $(t){try{o.setPost(!0);const s=await c.post(`${r}/create`,t),{deposit:e}=s.data.data;return n([e,...a.value]),o.handlePost(s),!0}catch(s){return console.error(s),o.handlePost(s.response),!1}}return{loaded:i,deposits:a,fetchAll:P,fetchUserAll:D,createDeposit:$,updateStatus:y,deleteOne:S}});export{A as u};
