import{d as oe,r as d,Q as Ae,o as b,b as g,$ as Se,Z as ke,n as Ee,c as M,a as Te,s as qe,R as j,l as De,e,k as r,m as A,f as s,F as H,h as X,j as Re,H as _,x as Pe,T as Ue,i as R,I as ee,g as te,t as n,M as Ne,P as se,O as Oe}from"./index-c50fc4de.js";import{_ as Me}from"./MyImageFileComponent-a5736129.js";import{_ as je}from"./MyDotDropdownComponent-b0d2efac.js";import{_ as Fe}from"./MySearchComponent-9a3a7482.js";import{_ as $e}from"./breadcrumb-shape-1-d7e59f85.js";import{c as B,d as L,a as f}from"./index.esm-3e222fcc.js";const Ve=oe({__name:"MyNiceSelectComponent",props:{selected:{},searchable:{type:Boolean},class:{},placeholder:{},selector:{}},emits:["change"],setup(y,{emit:P}){const p=y,S=d(),U=d();return Ae(()=>{S.value=window.NiceSelect.bind(U.value,{placeholder:p.placeholder||p.selected,selectedText:p.selected,searchable:p.searchable||!1}),window.$(`.nice-select-${p.selector} ul`).on("click",C=>{let c;(c=C.target.closest("li"))&&P("change",c.dataset.value)})}),(C,c)=>(b(),g("select",{class:ke(`select-nice ${p.class} bg-white nice-select-${C.selector}`),ref_key:"selectElement",ref:U},[Se(C.$slots,"default")],2))}});var u=(y=>(y.CREATE="create",y.UPDATE="update",y))(u||{});const He=Re('<section class="breadcrumb__area breadcrumb__border pt-160 pb-85 p-relative"><div class="breadrumb__shape"><img class="breadcrumb__shape-1" src="'+$e+'" alt=""></div><div class="container"><div class="row"><div class="col-xxl-12"><div class="breadcrumb__content text-center"><h3 class="breadcrumb__title">Users Collections</h3></div></div></div></div></section>',1),Be={class:"d-flex justify-content-center gap-2 mt-20"},Le={class:"d-flex justify-content-center gap-2 mt-20"},Ge={class:"header__search"},ze={class:"upcoming__area pt-70 pb-120"},Je={class:"container"},Ye={class:"row"},Ke={class:"col-xxl-12"},Qe={class:"upcoming__wrapper"},Ze={class:"upcoming__item"},xe={class:"upcoming__table"},We={class:"table"},Xe=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"Action"),e("th",{scope:"col"},"Item"),e("th",{scope:"col"},"Owner"),e("th",{scope:"col"},"Featured"),e("th",{scope:"col"},"Recommended"),e("th",{scope:"col"},"Status"),e("th",{scope:"col"},"Amount"),e("th",{scope:"col"},"Date Owned")])],-1),et={class:"stats-item"},tt=["onClick"],st=e("i",{class:"bi bi-cash me-2"},null,-1),ot=["onClick"],at=e("i",{class:"bi bi-cash me-2"},null,-1),nt=["onClick"],lt=e("i",{class:"bi bi-cash me-2"},null,-1),it=["onClick"],rt=e("i",{class:"bi bi-cash me-2"},null,-1),ct=["onClick"],dt={class:"upcoming__single d-flex align-items-center"},ut={class:"upcoming__thumb mr-10"},mt={href:"javascript:;"},_t=["src"],pt={class:"upcoming__content"},ht={href:"javascript:;"},vt={class:"upcoming__single d-flex align-items-center"},ft={class:"upcoming__thumb mr-10"},bt={href:"javascript:;"},gt=["src"],Ct={class:"upcoming__content"},wt={class:"mb-0"},It={href:"javascript:;"},yt={class:"mb-0"},At={"data-label":"Items Owned",class:"stats-item"},St={"data-label":"Items Owned",class:"stats-item"},kt={"data-label":"Items Owned",class:"stats-item"},Et={"data-label":"AVG PURCHASE PRICE",class:"stats-item"},Tt={"data-label":"AVG PURCHASE PRICE",class:"stats-item"},qt={class:"w-100"},Dt={class:"mb-3"},Rt=e("label",{class:"form-label text-sharp text-center w-100"},"Price",-1),Pt={class:"error-message"},Ut={class:"artwork-upload mb-3"},Nt=e("div",{class:"label form-label"},"Upload Image",-1),Ot=e("svg",{class:"crumina-icon"},[e("use",{"xlink:href":"#upload-icon"})],-1),Mt={class:"upload-notice text-center"},jt=e("span",{class:"btn btn-normal btn-dark browse-btn"}," Browse File ",-1),Ft={class:"error-message file-error"},$t={key:0,class:"form-group mb-3"},Vt={class:"form-field"},Ht=e("label",{class:"form-label",for:"title"},"To Owned By",-1),Bt=["value"],Lt={class:"error-message"},Gt={class:"form-group mb-3"},zt={class:"form-field"},Jt=e("label",{class:"form-label",for:"title"},"Artwork Title",-1),Yt={class:"error-message"},Kt={class:"form-group mb-3"},Qt={class:"form-field"},Zt=e("div",{class:"d-flex justify-content-between"},[e("label",{class:"form-label",for:"amount"},"Price")],-1),xt={class:"error-message"},Wt={class:"form-field comment-area mb-3"},Xt=e("label",{class:"form-label"},"Description",-1),es={class:"error-message"},rs=oe({__name:"CollectionsPage",setup(y){const P=d(""),p=t=>P.value=t,S=Ee(),U=M(()=>S.loaded),C=M(()=>S.users);U.value||S.fetchAll();const c=Te(),ae=M(()=>c.items.filter(t=>t.user&&t.title.toLowerCase().includes(P.value.toLowerCase())));M(()=>c.loaded).value||c.fetchAll();const h=d(!1),ne=t=>h.value=t,l=qe({status:j.INFO,title:"",message:"",onConfirm:()=>{}}),i=d(),le=t=>{i.value=t,l.status=j.DANGER,l.title="Do you really wants to delete this item?",l.message="This action cannot be reversed",l.onConfirm=ie,h.value=!0},ie=()=>{i.value&&(h.value=!1,c.deleteOne(i.value._id))},re=t=>{i.value=t,l.status=j.INFO,l.title=`Do you really wants to ${t.featured?"unfeature":"feature"} this item?`,l.message=t.featured?"Unfeauring this item will make it no visible on the featured sections of the website":"Feauring this item will likely make it visible on the featured sections of the website",l.onConfirm=ce,h.value=!0},ce=()=>{i.value&&(h.value=!1,c.feature(i.value._id,!i.value.featured))},de=t=>{i.value=t,l.status=j.INFO,l.title=`Do you really wants to ${t.recommended?"unrecommend":"recommend"} this item?`,l.message=t.recommended?"Unrecommending this item will make it no visible on the recommended sections of the website":"Recommending this item will likely make it visible on the recommended sections of the website",l.onConfirm=ue,h.value=!0},ue=()=>{i.value&&(h.value=!1,c.recommend(i.value._id,!i.value.recommended))},G=d(!1),F=t=>G.value=t,me=t=>{i.value=t,F(!0)},_e=async t=>{if(!i.value)return;await c.masterSell(t)&&F(!1)},pe=B({amount:L().typeError("Amount is required").positive("Amount is not valid").required("Amount is required")}),w=d(u.CREATE),k=d(),z=t=>k.value=t,$=d(),E=d(),T=d(),N=(t,a)=>{$.value=t,E.value=a==null?void 0:a.src},J=t=>{T.value=t},Y=d(!1),V=t=>Y.value=t,K=(t,a)=>{w.value=t,t===u.UPDATE?(N(void 0,{src:_.toImagePath("item","cover",a==null?void 0:a.cover)}),z(a)):(z(void 0),N(void 0,void 0)),V(!0)},he=async(t,a)=>{var O;if(w.value===u.CREATE&&!$.value||w.value===u.CREATE&&!T.value)return;const m=new FormData;m.append("item",$.value),m.append("itemId",(O=k.value)==null?void 0:O._id),m.append("userId",t.userId),m.append("title",t.title),m.append("description",t.description),m.append("amount",t.amount),(w.value===u.CREATE?await c.masterCreateItem(m):await c.update(m))&&(V(!1),a==null||a.resetForm(),N(),J())},ve=B({item:f().required("Image is required"),userId:f().required("User is required"),title:f().required("Title is required"),description:f().required("Description is required"),amount:L().typeError("Amount is required").positive("Amount is not valid").required("Amount is required")}),fe=B({itemId:f(),item:f(),title:f().required("Title is required"),description:f().required("Description is required"),amount:L().typeError("Amount is required").positive("Amount is not valid").required("Amount is required")});return(t,a)=>{const m=De("Button"),Q=Fe,O=je,be=Pe,I=Oe,Z=Ue,ge=Me,Ce=Ve;return b(),g(H,null,[He,e("div",Be,[r(m,{onClick:a[0]||(a[0]=()=>K(s(u).CREATE)),type:"button",class:"header__wallet-btn"},{default:A(()=>[R(" Add New ")]),_:1})]),e("div",Le,[e("div",Ge,[r(Q,{onKeyup:p})])]),e("section",ze,[e("div",Je,[e("div",Ye,[e("div",Ke,[e("div",Qe,[e("div",Ze,[e("div",xe,[e("table",We,[Xe,e("tbody",null,[(b(!0),g(H,null,X(s(ae),o=>(b(),g("tr",{key:o._id},[e("td",et,[r(O,null,{default:A(()=>[e("a",{onClick:()=>K(s(u).UPDATE,o),class:"border-bottom",href:"javascript:;"},[st,R(" Edit")],8,tt),o.status!==("ItemStatus"in t?t.ItemStatus:s(ee)).ON_SALE&&o.status!==("ItemStatus"in t?t.ItemStatus:s(ee)).SOLD?(b(),g("a",{key:0,onClick:()=>me(o),class:"border-bottom",href:"javascript:;"},[at,R(" Set on Sales")],8,ot)):te("",!0),e("a",{onClick:()=>re(o),class:"border-bottom",href:"javascript:;"},[lt,R(n(o.featured?"Unfeature":"Feature"),1)],8,nt),e("a",{onClick:()=>de(o),class:"border-bottom",href:"javascript:;"},[rt,R(n(o.recommended?"Unrecommend":"Recommend"),1)],8,it),e("a",{onClick:()=>le(o),class:"dropdown-item text-danger",href:"javascript:;"}," Delete",8,ct)]),_:2},1024)]),e("td",null,[e("div",dt,[e("div",ut,[e("a",mt,[e("img",{src:("helpers"in t?t.helpers:s(_)).toImagePath("item","profile",o.cover),alt:""},null,8,_t)])]),e("div",pt,[e("a",ht,n(o.title),1)])])]),e("td",null,[e("div",vt,[e("div",ft,[e("a",bt,[e("img",{src:("helpers"in t?t.helpers:s(_)).toImagePath("profile","nav",o.user.profile),alt:""},null,8,gt)])]),e("div",Ct,[e("p",wt,[e("a",It,n(("helpers"in t?t.helpers:s(_)).toTitleCase(o.user.name)),1)]),e("p",yt," @"+n(("helpers"in t?t.helpers:s(_)).toTitleCase(o.user.username)),1)])])]),e("td",At,n(o.featured?"Yes":"No"),1),e("td",St,n(o.recommended?"Yes":"No"),1),e("td",kt,n(o.status),1),e("td",Et,n(("helpers"in t?t.helpers:s(_)).toCurreny(o.amount)),1),e("td",Tt,n(("helpers"in t?t.helpers:s(_)).toNiceDate(o.dateOwned||o.createdAt)),1)]))),128))])])])])])])])])]),r(be,{"is-open":s(h),status:s(l).status,title:s(l).title,message:s(l).message,onConfirm:s(l).onConfirm,onClose:a[1]||(a[1]=()=>ne(!1))},null,8,["is-open","status","title","message","onConfirm"]),r(Z,{"is-open":s(G),"validation-schema":s(pe),onConfirm:_e,onClose:a[2]||(a[2]=()=>F(!1)),title:"Sell Artwork"},{default:A(({errors:o})=>{var q,D;return[e("div",qt,[e("div",Dt,[r(I,{type:"hidden",name:"itemId",value:(q=s(i))==null?void 0:q._id},null,8,["value"]),Rt,r(I,{name:"amount",type:"number",placeholder:"Amount",class:"form-control","validate-on-input":!0,value:(D=s(i))==null?void 0:D.amount},null,8,["value"]),e("span",Pt,n(o.amount),1)])])]}),_:1},8,["is-open","validation-schema"]),r(Z,{"is-open":s(Y),"validation-schema":s(w)===s(u).CREATE?s(ve):s(fe),onConfirm:he,onClose:a[5]||(a[5]=()=>V(!1)),title:s(w)===s(u).CREATE?"Create Artwork":"Update artwork"},{default:A(({errors:o})=>{var q,D,x,W;return[e("div",Ut,[Nt,r(ge,{name:"profile",type:["image/jpg","image/jpeg","image/png"],size:11e6,onChange:N},{default:A(({errors:v,filename:we,src:Ie})=>[e("div",{class:"upload-box",style:Ne({background:`url(${Ie||s(E)})`,backgroundSize:"cover",backgroundPosition:"center"})},[Ot,e("div",Mt,n(we||"Max 11MB, PNG, JPEG, JPG"),1),jt],4),r(I,{type:"hidden",name:"item",modelValue:s(E),"onUpdate:modelValue":a[3]||(a[3]=ye=>se(E)?E.value=ye:null)},null,8,["modelValue"]),e("span",Ft,n(v[0]||o.item),1)]),_:2},1024)]),s(w)===s(u).CREATE?(b(),g("div",$t,[e("div",Vt,[Ht,r(I,{type:"hidden",name:"userId",modelValue:s(T),"onUpdate:modelValue":a[4]||(a[4]=v=>se(T)?T.value=v:null)},null,8,["modelValue"]),e("div",null,[r(Ce,{class:"w-100",searchable:"",placeholder:"Select a user",selected:(q=s(C)[0])==null?void 0:q._id,selector:"user",onChange:J},{default:A(()=>[(b(!0),g(H,null,X(s(C),v=>(b(),g("option",{key:v._id,value:v._id,selected:""},n(("helpers"in t?t.helpers:s(_)).toTitleCase(v.name))+" - "+n(("helpers"in t?t.helpers:s(_)).toTitleCase(v.username)),9,Bt))),128))]),_:1},8,["selected"])]),e("span",Lt,n(o.userId),1)])])):te("",!0),e("div",Gt,[e("div",zt,[Jt,r(I,{type:"text",placeholder:"Title",class:"form-control mb-0",name:"title","validate-on-input":!0,value:(D=s(k))==null?void 0:D.title},null,8,["value"]),e("span",Yt,n(o.title),1)])]),e("div",Kt,[e("div",Qt,[Zt,r(I,{type:"number",placeholder:"Price",class:"form-control mb-0",name:"amount","validate-on-input":!0,value:(x=s(k))==null?void 0:x.amount},null,8,["value"]),e("span",xt,n(o.amount),1)])]),e("div",Wt,[Xt,r(I,{name:"description",as:"textarea",rows:"5",placeholder:"Description",class:"form-control w-100","validate-on-input":!0,value:(W=s(k))==null?void 0:W.description},null,8,["value"]),e("span",es,n(o.description),1)])]}),_:1},8,["is-open","validation-schema","title"])],64)}}});export{rs as default};
