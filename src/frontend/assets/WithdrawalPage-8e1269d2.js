import{d as I,r as v,c as N,s as R,R as p,b as _,e as s,F as k,h as V,f as t,k as D,j as L,x as W,o as u,m as x,a3 as n,i as b,g as f,Z as g,H as i,t as l}from"./index-c50fc4de.js";import{_ as M}from"./MyDotDropdownComponent-b0d2efac.js";import{_ as G}from"./breadcrumb-shape-1-d7e59f85.js";import{u as T}from"./withdrawal.store-de14e388.js";const $=L('<section class="breadcrumb__area breadcrumb__border pt-160 pb-85 p-relative"><div class="breadrumb__shape"><img class="breadcrumb__shape-1" src="'+G+'" alt=""></div><div class="container"><div class="row"><div class="col-xxl-12"><div class="breadcrumb__content text-center"><h3 class="breadcrumb__title">Users Withdrawals</h3></div></div></div></div></section>',1),F={class:"upcoming__area pt-70 pb-120"},H={class:"container"},U={class:"row"},B={class:"col-xxl-12"},z={class:"upcoming__wrapper"},Z={class:"upcoming__item"},q={class:"upcoming__table"},J={class:"table"},K=s("thead",null,[s("tr",null,[s("th",{scope:"col"},"Action"),s("th",{scope:"col"},"Status"),s("th",{scope:"col"},"User"),s("th",{scope:"col"},"Amount"),s("th",{scope:"col"},"Currency"),s("th",{scope:"col"},"Network"),s("th",{scope:"col"},"User's Wallet Address"),s("th",{scope:"col"},"Registered")])],-1),Q={class:"stats-item"},X=["onClick"],Y=s("i",{class:g("bi bi-check-circle me-2")},null,-1),ss=["onClick"],es=s("i",{class:g("bi bi-slash-circle me-2")},null,-1),ts=["onClick"],os=s("i",{class:"bi bi-trash me-2"},null,-1),as={class:"stats-item"},ns={class:"upcoming__single d-flex align-items-center"},is={class:"upcoming__thumb mr-10"},ls={href:"javascript:;"},cs=["src"],rs={class:"upcoming__content"},ds={class:"mb-0"},_s={href:"javascript:;"},us={class:"mb-0"},ms={class:"stats-item"},hs={class:"upcoming__single d-flex align-items-center"},ps={class:"upcoming__thumb mr-10"},vs=["src"],bs={class:"upcoming__content"},fs={href:"javascript:;"},gs={class:"stats-item"},Cs={class:"stats-item"},Ns={class:"stats-item"},Ps=I({__name:"WithdrawalPage",setup(ks){const c=v(!1),r=v(),y=o=>r.value=o,h=v(),A=o=>h.value=o,m=T(),w=N(()=>m.withdrawals.filter(o=>o.user));N(()=>m.loaded).value||m.fetchAll();const a=R({status:p.INFO,title:"",message:"",onConfirm:()=>{}}),C=(o,d)=>{y(o),A(d),d===n.APPROVED?(a.status=p.INFO,a.title="Do you really wants to approve this withdrawal?",a.message="Approving cannot be reversed."):(a.status=p.WARNING,a.title="Do you really wants to cancel this withdrawal?",a.message=`Canceling this withdrawal mark it has ${d} whereby the user will be credited back on his/her account`),a.onConfirm=P,c.value=!0},E=o=>{r.value=o,a.status=p.DANGER,a.title="Do you really wants to delete this withdrawal?",a.message="Deleting this withdrawal can not be reversed",a.onConfirm=S,c.value=!0},P=()=>{r.value&&(h.value!==n.APPROVED&&h.value!==n.CANCELLED||(c.value=!1,m.updateStatus(r.value._id,h.value)))},S=()=>{r.value&&(c.value=!1,m.deleteOne(r.value._id))};return(o,d)=>{const j=M,O=W;return u(),_(k,null,[$,s("section",F,[s("div",H,[s("div",U,[s("div",B,[s("div",z,[s("div",Z,[s("div",q,[s("table",J,[K,s("tbody",null,[(u(!0),_(k,null,V(t(w),e=>(u(),_("tr",{key:e._id},[s("td",Q,[D(j,null,{default:x(()=>[e.status===t(n).PENDING?(u(),_("a",{key:0,onClick:()=>C(e,t(n).APPROVED),class:"dropdown-item border-bottom",href:"javascript:;"},[Y,b("Approve")],8,X)):f("",!0),e.status===t(n).PENDING?(u(),_("a",{key:1,onClick:()=>C(e,t(n).CANCELLED),class:"dropdown-item",href:"javascript:;"},[es,b("Cancel")],8,ss)):f("",!0),e.status!==t(n).PENDING?(u(),_("a",{key:2,onClick:()=>E(e),class:"dropdown-item",href:"javascript:;"},[os,b("Delete")],8,ts)):f("",!0)]),_:2},1024)]),s("td",as,[s("span",{class:g(`badge light badge-${t(i).toStatus(e.status)}`)},l(t(i).toTitleCase(e.status)),3)]),s("td",null,[s("div",ns,[s("div",is,[s("a",ls,[s("img",{src:("helpers"in o?o.helpers:t(i)).toImagePath("profile","nav",e.user.profile),alt:""},null,8,cs)])]),s("div",rs,[s("p",ds,[s("a",_s,l(("helpers"in o?o.helpers:t(i)).toTitleCase(e.user.name)),1)]),s("p",us," @"+l(("helpers"in o?o.helpers:t(i)).toTitleCase(e.user.username)),1)])])]),s("td",ms,l(t(i).toCurreny(e.amount)),1),s("td",null,[s("div",hs,[s("div",ps,[s("img",{src:`/svg/crypto-svg/${e.withdrawalMethodObject.logo}`,alt:""},null,8,vs)]),s("div",bs,[s("a",fs,l(t(i).toTitleCase(e.withdrawalMethodObject.name)),1)])])]),s("td",gs,l(e.withdrawalMethodObject.network.toUpperCase()),1),s("td",Cs,l(e.address),1),s("td",Ns,l(t(i).toNiceDate(e.createdAt)),1)]))),128))])])])])])])])])]),D(O,{"is-open":t(c),status:t(a).status,title:t(a).title,message:t(a).message,onConfirm:t(a).onConfirm,onClose:d[0]||(d[0]=e=>c.value=!1)},null,8,["is-open","status","title","message","onConfirm"])],64)}}});export{Ps as default};
