import{a1 as v,S as x,q as A,n as m,r as h,a2 as l}from"./index-c50fc4de.js";const g=v("withdrawal",()=>{const r=x(),f=A(),w=m(),s="withdrawal",o=h([]),i=h(!1);function n(t){o.value=t}function c(t){i.value=t}function p(t,a){const e=o.value;if(!e)return;const d=e.findIndex(u=>u._id===t);e[d]=a,n(e)}async function P(){c(!1);try{const t=await l.get(`${s}/master`);n(t.data.data.withdrawals)}catch(t){console.error(t),r.handlePost(t.response)}c(!0)}async function y(){c(!1);try{const t=await l.get(`${s}`);n(t.data.data.withdrawals)}catch(t){console.error(t),r.handlePost(t.response)}c(!0)}async function S(t){try{r.setPost(!0);const a=await l.post(`${s}/create`,t),{withdrawal:e}=a.data.data;return n([e,...o.value]),r.handlePost(a),f.loadUser(),!0}catch(a){return console.error(a),r.handlePost(a.response),!1}}async function W(t,a){try{r.setPost(!0);const e=await l.patch(`${s}/update-status`,{status:a,withdrawalId:t});p(t,e.data.data.withdrawal),w.fetchAll(),r.handlePost(e)}catch(e){console.error(e),r.handlePost(e.response)}}async function $(t){try{r.setPost(!0);const a=await l.delete(`${s}/delete/${t}`),e=o.value;if(!e)return;const d=e.filter(u=>u._id!==t);n(d),r.handlePost(a)}catch(a){console.error(a),r.handlePost(a.response)}}return{loaded:i,withdrawals:o,fetchAll:P,fetchUserAll:y,createWithdrawal:S,updateStatus:W,deleteOne:$}});export{g as u};
